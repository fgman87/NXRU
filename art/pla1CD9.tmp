[gd_scene load_steps=65 format=3 uid="uid://3k3tmaon0stt"]

[ext_resource type="Script" path="res://script/player.gd" id="1_h5oao"]
[ext_resource type="PackedScene" uid="uid://dwntx8jsc5cwp" path="res://bullet.tscn" id="2_8wg5d"]
[ext_resource type="Resource" uid="uid://isyp752xbpxl" path="res://inventory/playerinv.tres" id="2_blywf"]
[ext_resource type="Texture2D" uid="uid://bfyn8w721veqw" path="res://art/survivalgame-player-green.png" id="2_ow6c3"]
[ext_resource type="PackedScene" uid="uid://jvewlro1pifg" path="res://inventory/inv_ui.tscn" id="4_d8wmy"]

[sub_resource type="AtlasTexture" id="AtlasTexture_oq3h4"]
atlas = ExtResource("2_ow6c3")
region = Rect2(448, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jystr"]
atlas = ExtResource("2_ow6c3")
region = Rect2(480, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h7m6w"]
atlas = ExtResource("2_ow6c3")
region = Rect2(512, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_j8m7f"]
atlas = ExtResource("2_ow6c3")
region = Rect2(544, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_qkjwk"]
atlas = ExtResource("2_ow6c3")
region = Rect2(576, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_x17rt"]
atlas = ExtResource("2_ow6c3")
region = Rect2(608, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_idxpx"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_lbdwt"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_i52ny"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_x22gf"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hd3r6"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xqa57"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 64, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_oi870"]
atlas = ExtResource("2_ow6c3")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1e73t"]
atlas = ExtResource("2_ow6c3")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_itfyd"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mymi7"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_tipvt"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1ce1k"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_sgxhs"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hfm04"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 128, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_blqbd"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_e5w6d"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_wjrb6"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_drepw"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_xqaa3"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_m0plg"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 96, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3w0x3"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_6qv7k"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_32ptd"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_owqud"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_djcuh"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f5l7x"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 160, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_s3sn8"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dwoq0"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3wiro"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fmgl5"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ser1o"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_0gm2c"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ysluk"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_01k4j"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rxi0j"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_y6ehb"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_y4a5q"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_88qec"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hveii"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jgcio"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_v0b7t"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_jw485"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_amdjp"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_afywh"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 224, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_etpea"]
atlas = ExtResource("2_ow6c3")
region = Rect2(288, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hdij6"]
atlas = ExtResource("2_ow6c3")
region = Rect2(160, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_uss7e"]
atlas = ExtResource("2_ow6c3")
region = Rect2(192, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_20qe2"]
atlas = ExtResource("2_ow6c3")
region = Rect2(224, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nrc58"]
atlas = ExtResource("2_ow6c3")
region = Rect2(64, 192, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7qfc6"]
atlas = ExtResource("2_ow6c3")
region = Rect2(96, 192, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_n6w5m"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_oq3h4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jystr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h7m6w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j8m7f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qkjwk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x17rt")
}],
"loop": false,
"name": &"death",
"speed": 6.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_idxpx")
}],
"loop": true,
"name": &"e-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_lbdwt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i52ny")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x22gf")
}],
"loop": true,
"name": &"e-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hd3r6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xqa57")
}],
"loop": true,
"name": &"e-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_oi870")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1e73t")
}],
"loop": true,
"name": &"idle",
"speed": 2.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_itfyd")
}],
"loop": true,
"name": &"n-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mymi7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tipvt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1ce1k")
}],
"loop": true,
"name": &"n-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_sgxhs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hfm04")
}],
"loop": true,
"name": &"n-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_blqbd")
}],
"loop": true,
"name": &"ne-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_e5w6d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wjrb6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_drepw")
}],
"loop": true,
"name": &"ne-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xqaa3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m0plg")
}],
"loop": true,
"name": &"ne-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3w0x3")
}],
"loop": true,
"name": &"nw-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_6qv7k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_32ptd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_owqud")
}],
"loop": true,
"name": &"nw-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_djcuh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f5l7x")
}],
"loop": true,
"name": &"nw-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_s3sn8")
}],
"loop": true,
"name": &"s-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dwoq0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3wiro")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fmgl5")
}],
"loop": true,
"name": &"s-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ser1o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0gm2c")
}],
"loop": true,
"name": &"s-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ysluk")
}],
"loop": true,
"name": &"se-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_01k4j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rxi0j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y6ehb")
}],
"loop": true,
"name": &"se-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_y4a5q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_88qec")
}],
"loop": true,
"name": &"se-walk",
"speed": 4.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hveii")
}],
"loop": true,
"name": &"sw-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jgcio")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v0b7t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jw485")
}],
"loop": true,
"name": &"sw-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_amdjp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_afywh")
}],
"loop": true,
"name": &"sw-walk",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_etpea")
}],
"loop": true,
"name": &"w-attack",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hdij6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uss7e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_20qe2")
}],
"loop": true,
"name": &"w-sattack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nrc58")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7qfc6")
}],
"loop": true,
"name": &"w-walk",
"speed": 5.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_kctwq"]
radius = 6.0

[sub_resource type="CircleShape2D" id="CircleShape2D_46nj5"]
radius = 14.0

[node name="player" type="CharacterBody2D" groups=["player"]]
position = Vector2(0, 1)
script = ExtResource("1_h5oao")
bullet_node = ExtResource("2_8wg5d")
inv = ExtResource("2_blywf")

[node name="Resource" type="ProgressBar" parent="."]
modulate = Color(0, 0.670588, 0.670588, 1)
custom_minimum_size = Vector2(100, 40)
layout_direction = 1
offset_left = -288.0
offset_top = -150.0
offset_right = -188.0
offset_bottom = -110.0
scale = Vector2(0.998663, 0.636921)

[node name="ProgressBar" type="ProgressBar" parent="."]
modulate = Color(0.290196, 0.643137, 0.321569, 1)
custom_minimum_size = Vector2(100, 40)
layout_direction = 1
offset_left = -288.0
offset_top = -162.0
offset_right = -188.0
offset_bottom = -122.0
scale = Vector2(1.2069, 0.28)
value = 100.0

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_n6w5m")
animation = &"w-walk"
frame_progress = 0.465781

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(2, 2)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
light_mask = 3
visibility_layer = 3
position = Vector2(0, 6)
shape = SubResource("CircleShape2D_kctwq")

[node name="Inv_UI" parent="." instance=ExtResource("4_d8wmy")]
offset_left = 46.0
offset_top = -85.0
offset_right = 130.0
offset_bottom = -21.0

[node name="Marker2D" type="Marker2D" parent="."]

[node name="Timer" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[node name="player_hitbox" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="player_hitbox"]
shape = SubResource("CircleShape2D_46nj5")

[node name="attack-cooldown" type="Timer" parent="."]

[node name="deal_attack_timer" type="Timer" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="Level" type="HBoxContainer" parent="UI"]
anchors_preset = -1
anchor_top = 0.002
anchor_bottom = 0.002
offset_left = 150.0
offset_top = 608.704
offset_right = 274.0
offset_bottom = 642.704
size_flags_vertical = 4

[node name="Label" type="Label" parent="UI/Level"]
unique_name_in_owner = true
modulate = Color(0.615686, 0.12549, 0.0117647, 1)
custom_minimum_size = Vector2(20, 0)
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "1
"

[node name="ProgressBar" type="ProgressBar" parent="UI/Level"]
unique_name_in_owner = true
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
max_value = 240.0

[node name="GainXP" type="Button" parent="UI"]
visible = false
offset_left = 252.0
offset_top = 1.0
offset_right = 316.0
offset_bottom = 32.0
text = "GainXP"

[node name="Stats" type="HBoxContainer" parent="UI"]
layout_direction = 2
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 1.0
offset_top = -166.0
offset_right = 211.0
offset_bottom = -8.0
grow_vertical = 0
scale = Vector2(0.84, 1.04)
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Attributes" type="VBoxContainer" parent="UI/Stats"]
layout_mode = 2

[node name="TotalXP" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "TotalXP"

[node name="HP" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "HP"

[node name="Defense" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "Defense"

[node name="Strength" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "Strength"

[node name="Vitality" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "Vitality"

[node name="Agility" type="Label" parent="UI/Stats/Attributes"]
layout_mode = 2
text = "Agility"

[node name="Values" type="VBoxContainer" parent="UI/Stats"]
layout_mode = 2

[node name="TotalXP" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[node name="HP" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[node name="Defense" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[node name="Strength" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[node name="Vitality" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[node name="Agility" type="Label" parent="UI/Stats/Values"]
unique_name_in_owner = true
custom_minimum_size = Vector2(40, 0)
layout_mode = 2
text = "
"
horizontal_alignment = 2

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="body_entered" from="player_hitbox" to="." method="_on_player_hitbox_body_entered"]
[connection signal="body_exited" from="player_hitbox" to="." method="_on_player_hitbox_body_exited"]
[connection signal="timeout" from="attack-cooldown" to="." method="_on_attackcooldown_timeout"]
[connection signal="timeout" from="deal_attack_timer" to="." method="_on_deal_attack_timer_timeout"]
[connection signal="pressed" from="UI/GainXP" to="." method="_on_gain_xp_pressed"]
